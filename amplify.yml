version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm install
  artifacts:
    # IMPORTANT - Please verify your build output directory
    baseDirectory: build
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
backend:
  phases:
    build:
      commands:
        - ln -fs /usr/local/bin/pip3.8 /usr/bin/pip3
        - ln -fs /usr/local/bin/python3.8 /usr/bin/python3
        - pip3 install --user pipenv
        - amplifyPush --simple
        - pip3 install -r requirements.txt
    # IMPORTANT - Please verify your build output directory
    artifacts:
      baseDirectory: .
      files:
        - app.py
        - requirements.txt
  cache:
    paths:
      - /root/.cache/pip
  dependencies:
    - flask
    - boto3re
